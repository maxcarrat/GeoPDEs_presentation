% !TeX root = ../../../main.tex
%
\tikzexternaldisable%
%

\tikzset{%
	highlight0/.style={rectangle,rounded corners,fill=black!15,draw,
		fill opacity=0.2,thin,opacity=0.4,inner sep=-2pt}
}%
\tikzset{%
	highlight1/.style={rectangle,rounded corners,fill=blue!15,draw,
		fill opacity=0.2,opacity=0.4,thin,inner sep=-2pt}
}%
\tikzset{%
	highlight2/.style={rectangle,rounded corners,fill=orange!15,draw,
		fill opacity=0.9,opacity=0.9,thin,inner sep=-2pt}
}%
\newcommand{\mytikzmark}[2]{%
	\tikz[overlay, remember picture, anchor=base, baseline=(#1.base), font=\tiny]%
	\node (#1) {#2};%
	%\tikzmark{#1}#2%
}%
\newcommand{\mytikzmarkt}[2]{%
	\tikz[overlay, remember picture, anchor=base, baseline=(pic cs:#1.base), font=\tiny]%
	\node (#1) {#2};%
	%\tikzmark{#1}#2%
}%
\newcommand{\Highlightt}[4][submatrix]{%
	%\tikz[overlay, remember picture]{%
%\begin{pgfonlayer}{background}%
	\node[#2,fit=(#3.north west) (#4.south east)] (#1) {};
	%\node[#2,fit=(pic cs:#3) (pic cs:#4)] (#1) {};
	%\fill[yellow] (pic cs:#3.north west) circle(2em);
%\end{pgfonlayer}%
%}%
}%
%
\newcommand{\Highlight}[4][submatrix]{%
	\tikz[overlay, remember picture]{
		\node[#2,fit=(#3.north west) (#4.south east)] (#1) {}; }
}%
\newcommand{\AdjustRight}[2]{%
	\tikz[overlay, remember picture]{%
		\node (#1adj) at (#2.east |- #1.south east) {};%
	}%
}%
\newcommand{\AdjustLeft}[2]{%
	\tikz[overlay, remember picture]{%
		\node (#1adj) at (#2.north west |- #1.north west) {};%
	}%
}%
%
%
\begin{minipage}[t]{0.46\textwidth}%
\begin{align*}%
\text{\small $\tensor{R}^{0,2}$} &= \frac{1}{16} && \hspace{-0.4cm} \left[\begin{smallmatrix} %
\mytikzmark{left0}{16} & 12 & 6 & 2 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\ 
0 & 4 & 9 & 11 & 10 & 6 & 3 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 1 & 3 & 6 & 10 & 12 & 12 & 10 & 6 & 3 & 1 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 1 & 3 & 6 & 10 & 12 & 12 & 10 & 6 & 3 & 1 & 0 & \mytikzmark{right0}{0}\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 3 & 6 & 10 & 11 & 9 & 4 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 2 & 6 & 12 & 16
\end{smallmatrix} \right] \Highlight[first0]{highlight0}{left0}{right0} \\
\text{\small $\tensor{R}^{1,2}$} &= \frac{1}{16}&&\hspace{-0.4cm}  \left[\begin{smallmatrix} %
16 & 8 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
0 & 8 & 12 & 4 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
0 & 0 & 4 & 12 & 12 & 4 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
0 & 0 & 0 & 0 & 4 & 12 & 12 & 4 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
0 & 0 & 0 & 0 & 0 & 0 & 4 & 12 & 12 & 4 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 4 & 12 & 12 & 4 & 0 & 0 & 0 & 0 & 0 & 0\\
\mytikzmark{left}{0} & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 4 & 12 & 12 & 4 & 0 & 0 & 0 &  \mytikzmark{right}{0}\\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 4 & 12 & 12 & 4 & 0 & 0\\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 4 & 12 & 8 & 0\\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 8 & 16\\
\end{smallmatrix}\right]\Highlight[first1]{highlight1}{left}{right}\\
\text{\small $\tensor{R}^{2,2}$} &= &&\hspace{-0.4cm} \left[\begin{smallmatrix} %
1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0\\ 
\mytikzmark{left2}{0} & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 1 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & \mytikzmark{right2}{1}
\end{smallmatrix}\right]%\Highlight[first2]{highlight2}{left}{right}\\
\end{align*}%
	%\end{pgfonlayer}{foreground}
	\begin{tikzpicture}[remember picture,overlay]
	\begin{pgfonlayer}{background}
		\Highlightt[first2]{highlight2}{left2}{right2}
	\end{pgfonlayer}{background}
	\end{tikzpicture}
\end{minipage}%
%
%
%
\hspace{-0.1cm}%
\begin{minipage}[t]{0.5\textwidth}%
\begin{align*}%
\text{\small $\tensor{M}^{\glob}_2$}  &= \frac{1}{16} \left[\,\begin{smallmatrix} %
\mytikzmark{left}{16} & 12 & 6 & 2 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0  \\ 
0 & 4 & 9 & 11 & 10 & 6 & 3 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\ 
0 & 0 & 1 & 3 & 6 & 10 & 12 & 12 & 10 & 6 & 3 & 1 & 0 & 0 & 0 & 0 & 0 & 0 \\ 
0 & 0 & 0 & 0 & 0 & 0 & 1 & 3 & 6 & 10 & 12 & 12 & 10 & 6 & 3 & 1 & 0 & \mytikzmark{right}{0}  \Highlight[second0]{highlight0}{left}{right}\\ 
\mytikzmark{left}{0} & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 4 & 12 & 12 & 4 & 0 & 0 & 0 & \mytikzmark{right}{0} \Highlight[second1]{highlight1}{left}{right}\\
\mytikzmark{left}{0} & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 16 & 0 & 0 & 0 & 0 & 0\\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 16 & 0 & 0 & 0 & 0 \\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 16 & 0 & 0 & 0 \\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 16 & 0 & 0 \\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 16 & 0 \\ 
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & \mytikzmark{right}{16} \Highlight[second2]{highlight2}{left}{right}
\end{smallmatrix}\,\right]%
\end{align*}%
\begin{minipage}[t]{\textwidth}
\input{pictures/operator/globalForHBKnotInsertion/ML1.small.tex}%
\end{minipage}
\end{minipage}%

\tikz[overlay, remember picture] {
	%\draw[->,thick,black,dashed,opacity=0.5] (first0.east) -- (second0.west) node [pos=0.66,above] {};
	\draw[->,thick,black,dashed,opacity=0.5] (first1.east) -- (second1.west) node [pos=0.66,above] {};
	\draw[->,thick,black,dashed,opacity=0.5] (first2.north east) -- (second2.south west)  node [pos=0.66,above] {};
	%	% 	
	%draw [decorate,decoration={brace,amplitude=2pt,raise=6pt},yshift=0pt]
	\draw [draw=none]
	(second2.east |- second0.north east) -- (second2.east |- second0.south east) node [black,midway,xshift=0.58cm,inner sep=1pt] (HB0) {\small $\mathcal{HB}^0$}; 
	\draw [draw=none]
	(second2.east |-second1.north east) -- (second2.east |- second1.south east) node [black,midway,xshift=0.58cm,inner sep=1pt] (HB1) {\small $\mathcal{HB}^1$};
	\draw [draw=none]
	(second2.east |-second2.north east) -- (second2.east |- second2.south east) node [black,midway,xshift=0.58cm,inner sep=1pt] (HB2) {\small $\mathcal{HB}^2$};
	%
	\draw [->,thick,black] (second0.east) -- (HB0);
	\draw [->,thick,black] (second1.east) -- (HB1);
	\draw [->,thick,black] (second2.east) -- (HB2);
	\draw [decorate,decoration={brace,amplitude=2pt,mirror,raise=6pt},yshift=-13pt]
	(second2.south west) -- (second2.south east) node [black,midway,yshift=-0.5cm] {\small $\mathcal{B}^2$};
}%
%\end{tikzpicture}

\tikzexternaldisable%