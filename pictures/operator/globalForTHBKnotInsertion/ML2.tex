% !TeX root = ../../../main.tex
\tikzexternaldisable%
%\begin{tikzpicture}
\tikzset{%
  highlight0/.style={rectangle,rounded corners,fill=black!15,draw,
    fill opacity=0.2,thin,inner sep=-2.1pt}
}%
\tikzset{%
	highlight1/.style={rectangle,rounded corners,fill=blue!15,draw,
		fill opacity=0.2,thin,inner sep=-2.1pt}
}%
\tikzset{%
	highlight2/.style={rectangle,rounded corners,fill=orange!15,draw,
		fill opacity=0.2,thin,inner sep=-2.1pt}
}%
\newcommand{\mytikzmark}[2]{\tikz[overlay, remember picture,
  baseline=(#1.base), font=\tiny] \node (#1) {#2};}%
%
\newcommand{\Highlight}[2][submatrix]{%
    \tikz[overlay, remember picture]{
    \node[#2,fit=(left.north west) (right.south east)] (#1) {};
	\node (#1ne) at (#1.north east) [] {};
	\node (#1se) at (#1.south east) [] {};
	\node (#1nw) at (#1.north west) [] {};
	\node (#1sw) at (#1.south west) [] {};}
}%

\begin{minipage}[t]{0.5\textwidth}%
\begin{align*}%
\tensor{M}^{2} &= \frac{1}{16} && \left[\begin{smallmatrix} %
\mytikzmark{left}{16} & 12 & 6 & 2 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
0 & 4 & 9 & 11 & 10 & 6 & 3 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
0 & 0 & 1 & 3 & 6 & 10 & 12 & 12 & 10 & 6 & 3 & 1 & 0 & 0 & 0 & 0 & 0 & 0\\
0 & 0 & 0 & 0 & 0 & 0 & 1 & 3 & 6 & 10 & 9 & 3 & 0 & 0 & 0 & 0 & 0 & \mytikzmark{right}{0} \Highlight[first2]{highlight0}\\
\mytikzmark{left}{0} & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 4 & 12 & 12 & 4 & 0 & 0 & 0 & 0\\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 4 & 12 & 0 & 0 & 0 & \mytikzmark{right}{0} \Highlight[first2]{highlight1}\\
\mytikzmark{left}{0} & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 16 & 0 & 0 & 0\\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 16 & 0 & 0\\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 16 & 0\\
0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & \mytikzmark{right}{16} \Highlight[first2]{highlight2}
\end{smallmatrix}\right]\\
\end{align*}%
\end{minipage}%
%
%
%
%\begin{minipage}[t]{0.5\textwidth}
%\begin{align*}
%\tensor{M}^2 &= \frac{1}{16} \left[\begin{smallmatrix} %
%\mytikzmark{left}{16} & 12 & 6 & 2 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\ 
%0 & 4 & 9 & 11 & 10 & 6 & 3 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\ 
%0 & 0 & 1 & 3 & 6 & 10 & 12 & 12 & 10 & 6 & 3 & 1 & 0 & 0 & 0 & 0 & 0 & 0\\ 
%0 & 0 & 0 & 0 & 0 & 0 & 1 & 3 & 6 & 10 & 12 & 12 & 10 & 6 & 3 & 1 & 0 & \mytikzmark{right}{0} \Highlight[second0]{highlight0}\\ 
%\mytikzmark{left}{0} & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 4 & 12 & 12 & 4 & 0 & 0 & 0 & 0\\
%0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 4 & 12 & 12 & 4 & 0 &  \mytikzmark{right}{0}\Highlight[second1]{highlight1}\\
%\mytikzmark{left}{0} & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 16 & 0 & 0 & 0\\ 
%0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 16 & 0 & 0\\ 
%0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 16 & 0\\ 
%0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & \mytikzmark{right}{16}\Highlight[second2]{highlight2}\\
%\end{smallmatrix}\right] 
%\end{align*}%
%%\begin{minipage}[t]{0.5\textwidth}
%\input{pictures/operator/globalForHBKnotInsertion/ML1.tikz}%
%%\end{minipage}
%\end{minipage}
%
%
%\tikz[overlay, remember picture] {
%  \draw[->,thick,red,dashed] (first0) -- (second0) node [pos=0.66,above] {};
%  \draw[->,thick,red,dashed] (first1ne) -- (second1sw) node [pos=0.66,above] {};
%  \draw[->,thick,red,dashed] (first2ne) -- (second2sw) node [pos=0.66,above] {};
%% 	
%\draw [decorate,decoration={brace,amplitude=2pt,raise=6pt},yshift=0pt]
%(second0ne) -- (second0se) node [black,midway,xshift=0.5cm] {\scriptsize $\mathcal{B}^0$}; 
%\draw [decorate,decoration={brace,amplitude=1.2pt,raise=6pt},yshift=0pt]
%(second1ne) -- (second1se) node [black,midway,xshift=0.5cm] {\scriptsize $\mathcal{B}^1$};
%\draw [decorate,decoration={brace,amplitude=2pt,raise=6pt},yshift=0pt]
%(second2ne) -- (second2se) node [black,midway,xshift=0.5cm] {\scriptsize $\mathcal{B}^2$};
%%
%\draw [decorate,decoration={brace,amplitude=2pt,mirror,raise=6pt},yshift=0pt]
%(second2sw) -- (second2se) node [black,midway,yshift=-0.5cm] {\scriptsize $\mathcal{B}^2$};
%}

%\end{tikzpicture}
\tikzexternalenable